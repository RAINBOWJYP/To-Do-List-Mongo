<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
      integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N"
      crossorigin="anonymous"
    />

    <title>Hello, world!</title>
  </head>
  <body>
    <%- include('nav.html') %>
    <div class="writeBox" style="margin: 24px 36px">
      <p>회원가입</p>
      <form action="/signupadd" method="post">
        <div class="form-group">
          <label for="id">아이디</label>
          <div class="idBox">
            <input
              type="text"
              class="form-control"
              placeholder="아이디를 입력해주세요."
              id="id"
              name="id"
            />
            <span
              ><button class="btn btn-light" id="idCheckBtn">
                중복인증
              </button></span
            >
          </div>
        </div>
        <div class="form-group">
          <label for="pw">비밀번호</label>
          <input
            type="password"
            class="form-control"
            id="pw"
            placeholder="영어+숫자 10자리 이상"
            name="pw"
          />
        </div>
        <div class="form-group">
          <label for="pwcheck">비밀번호 재확인</label>
          <input
            type="password"
            class="form-control"
            placeholder="비밀번호를 또 입력해주세요."
            id="pwCheck"
          />
        </div>
        <button type="submit" class="btn btn-primary" onclick="checkFoam()">
          회원가입
        </button>
      </form>
    </div>

    <style>
      .form-control {
        width: 50%;
      }

      .idBox {
        display: flex;
      }

      #idButton {
        margin-left: 16px;
      }
    </style>

    <script>
      const id = document.querySelector("#id");
      const pw = document.querySelector("#pw");
      const pwCheck = document.querySelector("#pwCheck");

      function checkFoam() {
        console.log(id.value + "입니다.");
        if (id.value == "") {
          alert("아이디를 입력해주세요.");
          return false;
        }
        if (pw.value == "") {
          alert("비밀번호를 입력해주세요.");
          return false;
        }
        if (pw.value != pwCheck.value) {
          alert("비밀번호가 불일치합니다. 비밀번호를 확인해주세요.");
          return false;
        }
      }
    </script>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

    <script>
      var dataId = document.querySelector("#id");
      $("#idCheckBtn").click(function (e) {
        if (dataId.value != "") {
          var 지금누른거 = $(this);
          $.ajax({
            method: "get",
            url: "/checkId",
            data: { id: dataId.value },
          })
            .done(function (결과) {
              console.log("성공했어염ㅋ");
            })
            .fail(function (xhr, textStatus, errorThrown) {
              console.log(xhr, textStatus, errorThrown);
            });
        } else {
          alert("아이디를 입력해주세요");
        }
        //e.target = 지금 클릭한 것
        //this = 지금 이벤트 동작하는 곳
      });
    </script>

    <!-- Optional JavaScript; choose one of the two! -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
      crossorigin="anonymous"
    ></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js" integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+" crossorigin="anonymous"></script>
    -->
  </body>
</html>
